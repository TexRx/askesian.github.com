<!DOCTYPE html><html lang="en-us"><head><link href="http://gmpg.org/xfn/11" rel="profile"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="content-type" content="text/html; charset=utf-8"><!-- Mobile FTW --><meta name="viewport" content="width=device-width,initial-scale=1"><!-- Title --><title>Conditional loading with require.js &middot; askesian</title><!-- Social Meta --><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@askesian"><meta name="twitter:title" content="askesian"><meta name="twitter:description" content="Crabwalking through the mind of a learner"><meta name="twitter:creator" content="@askesian"><meta name="twitter:domain" content="http://askesian.net"><!-- CSS --><link href="/assets/css/main.css" rel="stylesheet"><!-- JS --><script src="/assets/js/vendor-all.js"></script><!-- Font Face Observer for fast loading of webfonts --><script>(function (window, undefined) {
        var observer = new FontFaceObserver('Lato', {
            weight: 400
        });

        observer.check().then(function () {
            window.document.documentElement.className += " fonts-loaded";
        });
    }(this));</script><!-- Google Site Verification --><meta name="google-site-verification" content="U6YPESxNVHg41T6gYx640_oFdniD2hQZ6jaiYWJBsUY"><!-- Icons --><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/apple-touch-icon-precomposed.png"><link rel="shortcut icon" href="/favicon.ico"><!-- RSS --><link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"></head><body><!-- Google Tag Manager --><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K3873T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K3873T');</script><!-- End Google Tag Manager --><header class="header" role="banner"><div class="wrapper--header"><h1 class="brand"><a class="brand-link" href="/" title="home page of askesian.net">askesian</a></h1><nav class="main-nav"><a class="main-nav-item" href="/">Home</a> <a class="main-nav-item" href="/about/">About</a> <a class="main-nav-item" href="https://github.com/askesian/">GitHub</a> <a class="main-nav-item" href="https://twitter.com/askesian/">Twitter</a> <a class="main-nav-item" href="/atom.xml">RSS</a></nav></div></header><div class="page"><div class="article"><div class="article-header"><h1 class="article-header-title">Conditional loading with require.js</h1><div class="article-header-date">Apr 2013</div></div><div class="article-body"><h4>WHAT</h4><p>For one of my mobile-first projects, I wanted to use jQuery 2.0 by default, but fallback to jQuery 1.9.1 when the site was loaded in IE9 or lower. I wanted to use require.js as a script loader / pseudo-IoC container to make the site as composable and performant as possible. I had everything humming along fine, exept there was one snag. I couldn&#39;t figure out how to conditionally load the correct version of jQuery.</p><h4>WHY</h4><p>The reason I needed to do this was because the site content was managed with a browser-based CMS that allowed viewing the site pages as you would edit content. The site content was administered by content admins who are undoubtedly using some version of IE, so I had to fall back to jQuery pre-2.0 for IE8 support.</p><p>As you&#39;ve probably read, jQuery 2.xx drops support for IE8 and lower. This is a good thing -- I wanted to send the smaller jQuery 2.0 file to modern browsers, and especially portable devices that use cellular networks for data due to the inherent latency in said networks. Additionally, given the relative uncertainty around mobile device browser cache size limits, I wanted to be more confident that the jQuery script would always be cached by the mobile browser.</p><h4>HOW</h4><p>Figuring out how to do this wasn&#39;t straightforward for me, but I finally got it. Here&#39;s how I did it:</p><script src="https://gist.github.com/askesian/6e05daa443ca1955ea32.js"></script><p>Now, I am in no way claiming that this is the best or only way. This is my way, and it works beautifully.</p></div><div class="article-footer"><div class="article-footer-date"></div></div></div></div><footer class="footer" role="complimentary"><div class="wrapper--footer"></div></footer><script src="/assets/js/all.js"></script></body></html>